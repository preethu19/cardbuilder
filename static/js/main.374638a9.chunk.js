(this.webpackJsonpcardbuilder=this.webpackJsonpcardbuilder||[]).push([[0],{25:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(10),o=n.n(r),i=n(7),u=n(6),s=n(4),l=(n(25),n(5)),b=n(16),j=n(21),d=n(2),f=function(e){var t=e.shapeProps,n=e.isSelected,c=e.onSelect,r=(e.onMove,e.onChange),o=a.a.useRef(),i=a.a.useRef();return a.a.useEffect((function(){n&&(i.current.nodes([o.current]),i.current.getLayer().batchDraw())}),[n]),Object(d.jsxs)(a.a.Fragment,{children:[Object(d.jsx)(l.e,Object(s.a)(Object(s.a)({onDblClick:c,onDblTap:c,ref:o},t),{},{onDragEnd:function(e){r(Object(s.a)(Object(s.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,c=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(s.a)(Object(s.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*c),height:Math.max(n.height()*a)}))}})),n&&Object(d.jsx)(l.h,{ref:i,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})},g=function(e){var t=e.shapeProps,n=e.isSelected,c=e.onSelect,r=(e.onMove,e.onChange),o=a.a.useRef(),i=a.a.useRef();return a.a.useEffect((function(){n&&(i.current.nodes([o.current]),i.current.getLayer().batchDraw())}),[n]),Object(d.jsxs)(a.a.Fragment,{children:[Object(d.jsx)(l.a,Object(s.a)(Object(s.a)({onDblClick:c,onDblTap:c,ref:o},t),{},{onDragEnd:function(e){r(Object(s.a)(Object(s.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,c=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(s.a)(Object(s.a)({},t),{},{x:n.x(),y:n.y(),radius:Math.max(n.radius()*c,n.radius()*a)}))}})),n&&Object(d.jsx)(l.h,{ref:i,boundBoxFunc:function(e,t){return t.radius<5?e:t}})]})},h=function(e){var t=e.shapeProps,n=e.isSelected,c=e.onSelect,r=(e.onMove,e.onChange),o=a.a.useRef(),i=a.a.useRef();return a.a.useEffect((function(){n&&(i.current.nodes([o.current]),i.current.getLayer().batchDraw())}),[n]),Object(d.jsxs)(a.a.Fragment,{children:[Object(d.jsx)(l.g,Object(s.a)(Object(s.a)({onDblClick:c,onDblTap:c,ref:o},t),{},{onDragEnd:function(e){r(Object(s.a)(Object(s.a)({},t),{},{x:e.target.x(),y:e.target.y()}))},onTransformEnd:function(e){var n=o.current,c=n.scaleX(),a=n.scaleY();n.scaleX(1),n.scaleY(1),r(Object(s.a)(Object(s.a)({},t),{},{x:n.x(),y:n.y(),width:Math.max(5,n.width()*c),height:Math.max(n.height()*a)}))}})),n&&Object(d.jsx)(l.h,{ref:i,boundBoxFunc:function(e,t){return t.width<5||t.height<5?e:t}})]})};function O(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=(t[0],t[1],Object(c.useState)([])),r=Object(u.a)(n,2),o=(r[0],r[1],Object(c.useState)([])),O=Object(u.a)(o,2),x=O[0],p=O[1],y=Object(c.useState)(null),v=Object(u.a)(y,2),S=v[0],m=v[1],k=Object(c.useState)(!1),w=Object(u.a)(k,2),C=w[0],D=w[1],T=Object(c.useState)(null),E=Object(u.a)(T,2),M=E[0],P=E[1],R=a.a.useState(""),F=Object(u.a)(R,2),X=F[0],Y=F[1],B=a.a.useState([]),z=Object(u.a)(B,2),L=z[0],q=z[1],J=a.a.useRef(!1),W=Object(c.useState)(!1),H=Object(u.a)(W,2),I=H[0],V=H[1],A=function(e){if(I){J.current=!0;var t=e.target.getStage().getPointerPosition();p([].concat(Object(i.a)(x),[{tool:X,points:[t.x,t.y],name:"line",index:L.length}])),q([].concat(Object(i.a)(L),[{tool:X,points:[t.x,t.y],name:"line"}]))}N(e)},G=function(e){if(I){if(!J.current)return;var t=e.target.getStage().getPointerPosition(),n=L[L.length-1];n.points=n.points.concat([t.x,t.y]),L.splice(L.length-1,1,n),q(L.concat())}},K=function(){I&&(J.current=!1)},N=function(e){e.target===e.target.getStage()&&m(null),D(!1)},Q=Object(c.useRef)(null),U=function(e){p((function(t){return t.filter((function(t,n){return t.id!==e.id}))})),p((function(t){return[].concat(Object(i.a)(t),[e])}))};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(l.f,{width:window.innerWidth,height:window.innerHeight,ref:Q,onTouchStart:function(e){N(e),A(e)},onMouseDown:A,onTouchEnd:K,onMousemove:G,onTouchMove:G,onMouseup:K,children:Object(d.jsxs)(l.c,{children:[x.map((function(e,t){return"rectangle"==e.name?Object(d.jsx)(f,{shapeProps:e,isSelected:e.id===S,onSelect:function(){V(!1),U(e),m(e.id)},onMove:function(){return U(e)},onChange:function(e){var n=x.slice();n[t]=e,p(n)}},t):"circle"==e.name?Object(d.jsx)(g,{shapeProps:e,isSelected:e.id===S,onSelect:function(){V(!1),U(e),m(e.id)},onMove:function(){return U(e)},onChange:function(e){var n=x.slice();n[t]=e,p(n)}},t):"text"==e.name?Object(d.jsx)(h,{shapeProps:e,isSelected:e.id===S,onSelect:function(){V(!1),U(e),m(e.id),P(e),D(!C)},onMove:function(){return U(e)},onChange:function(e){var n=x.slice();n[t]=e,p(n)}},t):void 0})),L.map((function(e,t){return Object(d.jsx)(l.d,{points:e.points,stroke:"#df4b26",strokeWidth:5,tension:.5,lineCap:"round",globalCompositeOperation:"eraser"===e.tool?"destination-out":"source-over"},t)})),Object(d.jsx)(l.a,{name:"draggableCircle1",x:50,y:50,radius:25,stroke:"black",id:"circle1"}),Object(d.jsx)(l.a,{name:"draggableCircle",x:50,y:50,radius:25,stroke:"black",draggable:!0,id:"circle2",onClick:function(){return V(!1)},onTap:function(){return V(!1)},onDragStart:function(){return V(!1)},onDragEnd:function(e){p((function(t){return[].concat(Object(i.a)(t),[{x:e.target.x(),y:e.target.y(),radius:25,stroke:"black",id:Object(b.v4)(),fill:"red",name:"circle"}])})),Q.current.findOne(".draggableCircle").position({x:50,y:50})}}),Object(d.jsx)(l.e,{x:25,y:80,width:50,height:50,stroke:"black",id:"rect1"}),Object(d.jsx)(l.e,{name:"draggableRect",x:25,y:80,width:50,height:50,stroke:"black",id:"rect1",draggable:!0,onClick:function(){return V(!1)},onTap:function(){return V(!1)},onDragStart:function(){return V(!1)},onDragEnd:function(e){p((function(t){return[].concat(Object(i.a)(t),[{x:e.target.x(),y:e.target.y(),stroke:"black",width:50,height:50,id:Object(b.v4)(),fill:"green",name:"rectangle"}])})),Q.current.findOne(".draggableRect").position({x:25,y:80})}}),Object(d.jsx)(l.g,{fontSize:50,text:"T",width:40,height:100,x:35,y:140}),Object(d.jsx)(l.g,{name:"draggableText",x:35,y:140,text:"T",fontSize:50,width:40,height:100,draggable:!0,onClick:function(){return V(!1)},onTap:function(){return V(!1)},onDragStart:function(){return V(!1)},onDragEnd:function(e){p((function(t){return[].concat(Object(i.a)(t),[{x:e.target.x(),y:e.target.y(),id:Object(b.v4)(),text:"T",width:40,textEditVisible:!0,height:100,fontSize:50,name:"text"}])})),Q.current.findOne(".draggableText").position({x:35,y:140})}}),Object(d.jsx)(j.a,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{type:"button",value:"Pencil",style:"pen"==X&&I?{backgroundColor:"aqua"}:null,onClick:function(){Y("pen"),V(!I)}}),Object(d.jsx)("input",{type:"button",value:"Eraser",style:"eraser"==X&&I?{backgroundColor:"aqua"}:null,onClick:function(){Y("eraser"),V(!I)}})]})})]})}),C?Object(d.jsx)("textarea",{value:M.text,onChange:function(e){P((function(t){return Object(s.a)(Object(s.a)({},t),{},{text:e.target.value})})),p(x.map((function(t){return t.id==S?Object(s.a)(Object(s.a)({},t),{},{text:e.target.value}):t})))}}):null]})}o.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(O,{})}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.374638a9.chunk.js.map